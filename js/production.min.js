function setContentFromHash(){var a=getLocationHash();if(console.log("currentHash: "+a),"About"===a)return void showAboutSection();for(var b in projects)if(projects[b].hash.toUpperCase()===a.toUpperCase())return loadProject(b,!1),void(currentProjectId=parseInt(b));$(".viewport-section#project-images").css("visibility","hidden"),$(".nav-menu").css("visibility","hidden"),loadProject(0,!0)}function setLocationHash(a){window.location.hash=a}function getLocationHash(){return window.location.hash.substring(1)}function setupLinks(){$("#info-link").click(function(a){a.preventDefault(),showProjectInfo()}),$(".button-menu.next-button-menu").click(function(a){a.preventDefault(),loadNextProject()}),$(".button-menu.back-button-menu").click(function(a){a.preventDefault(),loadPastProject()}),$("#about-link-open").click(function(a){a.preventDefault(),showAboutSection()}),$("#about-link-close").click(function(a){a.preventDefault(),showAboutSection()})}function showAboutSection(){bContentTransition||(bContentTransition=!0,bAboutSection?$("#about-container").animate({top:"-100%"},contentTransitionTime,function(){bAboutSection=!1,bHashSetFromDOM=!0,bContentTransition=!1,setLocationHash(lastLocationHash)}):$("#about-container").animate({top:"0"},contentTransitionTime,function(){bAboutSection=!0,bHashSetFromDOM=!0,bContentTransition=!1,lastLocationHash=getLocationHash(),lastLocationHash===aboutSection.hash&&(lastLocationHash=projects[0].hash,loadProject(0)),setLocationHash(aboutSection.hash)}))}function updateProjectNavButtons(){bProjectInfo=!1,$("#project-name").html(projects[currentProjectId].name),$("#info-link").html("MORE&nbsp;INFO"),currentProjectId+1===projects.length?$(".button-menu.next-button-menu").addClass("disabled"):$(".button-menu.next-button-menu").removeClass("disabled"),currentProjectId-1===-1?$(".button-menu.back-button-menu").addClass("disabled"):$(".button-menu.back-button-menu").removeClass("disabled"),currentProjectId+1===projects.length||currentProjectId-1===-1?$(".extra-button-menu").addClass("disabled"):$(".extra-button-menu").removeClass("disabled")}function loadProject(a,b){currentProjectId=a,updateProjectNavButtons(),$(".viewport-section#project-images").load(projects[a].fileName+" .img-project-container",function(){setupImages($(".viewport-section#project-images")),b&&homepageFadeIn()})}function homepageFadeIn(){bContentTransition=!0,$(".viewport-section#project-images").css("opacity","0.0"),$(".viewport-section#project-images").css("visibility","visible"),$(".viewport-section#project-images").animate({opacity:"1.0"},contentHomePageAppearTime,function(){bContentTransition=!1,$(".nav-menu").css("opacity","0.0"),$(".nav-menu").css("visibility","visible"),$(".nav-menu").animate({opacity:"1.0"},navHomePageAppearTime)})}function loadNextProject(){bContentTransition||currentProjectId===projects.length-1||(currentProjectId++,bContentTransition=!0,console.log("currentProjectId: "+currentProjectId),$("#container").append('<section class="right-section"></section>'),$(".right-section").css("margin-left","110%"),$(".right-section").load(projects[currentProjectId].fileName+" .img-project-container",function(){setupImages($(".right-section")),$(".right-section").animate({marginLeft:"0%"},contentTransitionTime,function(){$("viewport-section").remove(),$(this).addClass("viewport-section"),$(this).removeClass("right-section"),$(this).attr("id","project-images"),updateProjectNavButtons(),$("#project-name").html(projects[currentProjectId].name),$("#info-link").html("MORE&nbsp;INFO"),bHashSetFromDOM=!0,bContentTransition=!1,setLocationHash(projects[currentProjectId].hash)}),$(".viewport-section").animate({marginLeft:"-110%"},contentTransitionTime,function(){$(this).remove()})}))}function loadPastProject(){bContentTransition||0===currentProjectId||(bContentTransition=!0,currentProjectId--,$("#container").append('<section class="left-section"></section>'),$(".left-section").css("margin-left","-110%"),$(".left-section").load(projects[currentProjectId].fileName+" .img-project-container",function(){setupImages($(".left-section")),$(".left-section").animate({marginLeft:"0%"},contentTransitionTime,function(){$(this).addClass("viewport-section"),$(this).removeClass("left-section"),$(this).attr("id","project-images"),updateProjectNavButtons(),$("#project-name").html(projects[currentProjectId].name),$("#info-link").html("MORE&nbsp;INFO"),bHashSetFromDOM=!0,bContentTransition=!1,setLocationHash(projects[currentProjectId].hash)}),$(".viewport-section").animate({marginLeft:"110%"},contentTransitionTime,function(){$(this).remove()})}))}function setupImages(a){currentProjectImageId=0;var b=a.find(" .img-container > a > #0");console.log("ciao: "+a.find(".img-container > a > #0").attr("id")),b.css("opacity","1.0"),b.attr("src",$(b).attr("data-original")).load(),$(".img-container > a").click(function(a){a.preventDefault(),loadNextImage()}),updateImgNavButtons(a)}function updateImgNavButtons(a){var b=a.find(".img-container > a").children().length;a.find(".currentImgNum").html(currentProjectImageId+1),a.find(".totImgNum").html(b)}function loadNextImage(){if(!bImageTransition){bImageTransition=!0;var a=$(".img-container > a").children().length,b=currentProjectImageId+1;b===a&&(b=0),$("#background-logo").css("opacity","0.0");var c=$(".img-container  a > #"+b);$(c).attr("src",c.attr("data-original")).load(function(){$(this).animate({opacity:"1.0"},1e3,function(){$(".img-container > a > #"+currentProjectImageId).animate({opacity:"0.0"},1e3),$(".img-container > a > #"+b).animate({opacity:"1.0"},1e3),$("#background-logo").css("opacity","1.0"),bImageTransition=!1,currentProjectImageId=b,updateImgNavButtons($(".viewport-section#project-images"))})})}}function showProjectInfo(){bContentTransition||(bProjectInfo=!bProjectInfo,$("#background-logo").css("opacity","0.0"),bProjectInfo?($(".img-container > a").children().each(function(){parseInt($(this).attr("id"))===currentProjectImageId&&$(this).animate({opacity:"0.0"},1e3,function(){})}),$(".img-footer").animate({opacity:"0.0"},1e3,function(){}),$("#container").append('<section class="viewport-section" id="project-info"></section>'),$(".viewport-section#project-info").load(projects[currentProjectId].fileName+" .text-container-wrapper",function(){$(".text-container-wrapper").css("visibility","visible"),$(".text-container-wrapper").animate({opacity:"1.0"},1e3,function(){$("#background-logo").css("opacity","1.0"),$("#info-link").html("LESS&nbsp;INFO"),$(".text-container").height()+$(".text-container").offset().top>$(window).height()&&($(".ps-scrollbar-y-rail").length?$(".text-container-wrapper").perfectScrollbar("update"):$(".text-container-wrapper").perfectScrollbar())})})):($(".viewport-section#project-images").load(projects[currentProjectId].fileName+" .img-project-container",function(){setupImages($(".viewport-section#project-images")),$(".img-container > a").children().each(function(){parseInt($(this).attr("id"))===currentProjectImageId&&$(this).animate({opacity:"1.0"},1e3,function(){})}),$(".img-footer").animate({opacity:"1.0"},1e3,function(){})}),$(".text-container-wrapper").animate({opacity:"0.0"},1e3,function(){$("#background-logo").css("opacity","1.0"),$("#info-link").html("MORE&nbsp;INFO"),$(".text-container-wrapper").css("visibility","hidden")})))}function handleKeyUp(a){37===a.keyCode?loadPastProject():39===a.keyCode&&loadNextProject()}function handleTouchMove(a){a.preventDefault();var b=a.changedTouches;bTouchScrolling||(bTouchScrolling=!0,scrollingStartX=b[0].pageX)}function handleTouchEnd(a){var b=a.changedTouches;bTouchScrolling&&(bTouchScrolling=!1,b[0].pageX>scrollingStartX+scrollingOffsetX?loadPastProject():b[0].pageX<scrollingStartX-scrollingOffsetX&&loadNextProject())}!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);var currentProjectId=0,currentProjectImageId=0,contentTransitionTime=1500,contentHomePageAppearTime=1500,navHomePageAppearTime=1e3,bContentTransition=!1,projects=[{fileName:"../PatchOfSky.html",hash:"PatchOfSky",name:"PATCH OF SKY"},{fileName:"../ProgrammingObjects.html",hash:"ProgrammingObjects",name:"PROGRAMMING OBJECTS"},{fileName:"../MessageBox.html",hash:"MessageBox",name:"MESSAGE BOX"},{fileName:"../StonePad.html",hash:"StonePad",name:"STONE PAD"}],aboutSection={fileName:"../About.html",hash:"About"};$(function(){setContentFromHash(),setupLinks()});var bHashSetFromDOM=!1;window.onhashchange=function(){bHashSetFromDOM?bHashSetFromDOM=!1:setContentFromHash()};var bProjectInfo=!1,bAboutSection=!1,lastLocationHash="",bImageTransition=!1;document.addEventListener("keyup",handleKeyUp,!1),document.addEventListener("touchmove",handleTouchMove,!1),document.addEventListener("touchend",handleTouchEnd,!1);var scrollingOffsetX=15,bTouchScrolling=!1,scrollingStartX;window.onresize=function(){$(".text-container-wrapper").scrollTop(0),$(".text-container-wrapper").perfectScrollbar("update")};